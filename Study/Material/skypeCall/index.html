<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title> Let Start Skype call</title>
    <link rel="stylesheet" href="app.css" />

  </head>
  <body>
    <div>
      <title>RecordRTC Google Chrome Extension API</title>

<p>This chrome extension is required: <a class="btn" href="https://chrome.google.com/webstore/detail/recordrtc/ndcljioonkecdnaaihodjgiliohngojp">Link To Google Chrome Extension</a></p>

<br>

<select id="RecordRTC_Extension_Options">
    <option value="0">Screen Only (wihtout audio)</option>
    <option value="1">Screen + Microphone</option>
    <option value="2">Screen + Speakers</option>
    <option value="3">Screen + Microphone + Speakers</option>
    <option value="4">Chrome Tab</option>
    <option value="5">Chrome Tab (Audio Only)</option>
    <option value="6">Full Screen + Camera</option>
    <option value="7">Microphone + Camera</option>
    <option value="8">Microphone + Speakers</option>
    <option value="9">Microphone Only</option>
    <option value="10">Speakers Only</option>
</select>
<button id="btn-start-recording">Start Recording</button>
<button id="btn-stop-recording" disabled>Stop Recording</button>

<hr>
<video controls autoplay playsinline></video>
      <div style="margin-top: 200px;">
        <input type="text" id="username" value="anil_helm"/><br>

      <div>
      <div id="home" class="flex-row">
          <a style="width: 10%;" class="btn" id="call-btn">Call</a>

          <a class="btn" id="add-to-contacts-btn">Add to contacts</a>

          <a class="btn" id="view-profile-btn">View User Profile</a>
          <a style="width: 20%;"class="btn" id="voice-email-btn">Voice Email</a><br>
          <!-- <a class="btn" id="chat-btn">Start Chat</a><br>
          <a class="btn" id="sendfile-btn">Send File</a><br> -->


          </div>



      </div>


      <section  id="about">
        <iframe id="#game" src="http://static-hoc.studio.code.org/?s=hoc
        "width="100%" "margin-left="100px" height="600"></iframe>
      </section>
  </body>
  <script type="application/javascript" >
  function el(elementId, username, action){
    document.getElementById(elementId).setAttribute("href", "skype:" + username + "?" + action);
  }

  function buildLinkRefs(){
    var username = document.getElementById("username").value;

    el("call-btn", username, "call");
    el("add-to-contacts-btn", username, "add");
    el("view-profile-btn", username, "userinfo");
    el("voice-email-btn", username, "voicemail");
    el("chat-btn", username, "chat");
    el("sendfile-btn", username, "sendfile");
  }
   buildLinkRefs();
  document.getElementById("username").addEventListener("change", function(){
    buildLinkRefs();
  }, false);

  if(typeof RecordRTC_Extension === 'undefined') {
    alert('RecordRTC chrome extension is either disabled or not installed.');
}

// first step
var recorder = new RecordRTC_Extension();

var video = document.querySelector('video');

function stopRecordingCallback(blob) {
    video.src = video.srcObject = null;
    video.src = URL.createObjectURL(blob);
    recorder = null;
}

document.getElementById('btn-start-recording').onclick = function() {
    this.disabled = true;
    var options = recorder.getSupoortedFormats()[document.getElementById('RecordRTC_Extension_Options').value];

    // second step
    recorder.startRecording(options, function() {
        document.getElementById('btn-stop-recording').disabled = false;
    });
};

document.getElementById('btn-stop-recording').onclick = function() {
    this.disabled = true;

    // third and last step
    recorder.stopRecording(stopRecordingCallback);
};


  </script>

  <script src="https://www.webrtc-experiment.com/common.js"></script>
</html>
