const question=document.getElementById("question"),choices=Array.from(document.getElementsByClassName("choice-text")),progressText=document.getElementById("progressText"),scoreText=document.getElementById("score"),progressBarFull=document.getElementById("progressBarFull"),loader=document.getElementById("loader"),game=document.getElementById("game");let currentQuestion={},acceptingAnswers=!1,score=0,questionCounter=0,availableQuesions=[],questions=[];fetch("https://run.mocky.io/v3/a72152cf-169f-43d7-b666-bd19de52a0e6").then(e=>e.json()).then(e=>{questions=e.results.map(e=>{const t={question:e.question},s=[...e.incorrect_answers];return t.answer=Math.floor(4*Math.random())+1,s.splice(t.answer-1,0,e.correct_answer),s.forEach((e,s)=>{t["choice"+(s+1)]=e}),t}),startGame()}).catch(e=>{console.error(e)});const CORRECT_BONUS=10,MAX_QUESTIONS=3;startGame=(()=>{questionCounter=0,score=0,availableQuesions=[...questions],getNewQuestion(),game.classList.remove("hidden"),loader.classList.add("hidden")}),getNewQuestion=(()=>{if(0===availableQuesions.length||questionCounter>=3)return localStorage.setItem("mostRecentScore",score),window.location.assign("../QuizAppMaster/end.html");questionCounter++,progressText.innerText=`Question ${questionCounter}/3`,progressBarFull.style.width=`${questionCounter/3*100}%`;const e=Math.floor(Math.random()*availableQuesions.length);currentQuestion=availableQuesions[e],question.innerHTML=currentQuestion.question,choices.forEach(e=>{const t=e.dataset.number;e.innerHTML=currentQuestion["choice"+t]}),availableQuesions.splice(e,1),acceptingAnswers=!0}),choices.forEach(e=>{e.addEventListener("click",e=>{if(!acceptingAnswers)return;acceptingAnswers=!1;const t=e.target,s=t.dataset.number==currentQuestion.answer?"correct":"incorrect";"correct"===s&&incrementScore(10),t.parentElement.classList.add(s),setTimeout(()=>{t.parentElement.classList.remove(s),getNewQuestion()},1e3)})}),incrementScore=(e=>{score+=e,scoreText.innerText=score});
